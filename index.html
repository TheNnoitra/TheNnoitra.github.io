<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Автосервис CRM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
      /* Стили из предыдущих версий */
      :root {
          --primary-bg: #f5f5f5;
          --text-color: #212121;
          --accent-color: #2196F3;
      }

      body {
          background-color: var(--primary-bg);
          color: var(--text-color);
          padding-bottom: env(--tg-content-safe-area-inset-bottom);
      }

      .container {
          padding: 16px;
          max-width: 600px;
          margin: 0 auto;
      }

      .card {
          background-color: white;
          padding: 16px;
          border-radius: 8px;
          margin: 8px 0;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }

      .button {
          background-color: var(--accent-color);
          color: white;
          padding: 12px;
          border: none;
          border-radius: 4px;
          margin: 8px 0;
          width: 100%;
      }

      [data-theme="dark"] {
          --primary-bg: #121212;
          --text-color: white;
          --accent-color: #1976D2;
      }
  </style>
</head>
<body>
<div class="container">
  <!-- Меню администратора -->
  <div id="admin-menu" class="hidden">
    <button class="button" onclick="showAddCarForm()">Добавить автомобиль</button>
    <button class="button" onclick="showCarsList()">Автомобили в работе</button>
    <button class="button" onclick="showHistory()">История</button>
  </div>

  <!-- Форма добавления автомобиля -->
  <div id="add-car-form" class="hidden">
    <h3>Добавить автомобиль</h3>
    <input type="text" placeholder="VIN" id="vin" required>
    <input type="text" placeholder="Марка" id="brand" required>
    <input type="text" placeholder="Модель" id="model" required>
    <input type="number" placeholder="Пробег (км)" id="mileage">
    <textarea placeholder="Список работ" id="tasks"></textarea>
    <button class="button" onclick="saveCar()">Сохранить</button>
  </div>

  <!-- Список автомобилей -->
  <div id="cars-list" class="hidden">
    <div class="card" v-for="car in cars">
      <h3>{{ car.brand }} {{ car.model }}</h3>
      <p>VIN: {{ car.vin }}</p>
      <button class="button" onclick="assignExecutor(car.id)">Назначить исполнителя</button>
    </div>
  </div>

  <!-- Модальное окно назначения исполнителя -->
  <div id="assign-modal" class="hidden">
    <input type="text" placeholder="Telegram ID исполнителя" id="executor-id">
    <button onclick="confirmAssignment()">Назначить</button>
  </div>
</div>

<script src="https://telegram.org/js/telegram-web-app.js?56"></script>
<script>
  const tg = window.Telegram.WebApp;
  tg.ready();

  // Аутентификация
  async function auth() {
    const userId = tg.initData?.user?.id;
    // Сохранение в localStorage или отправка на бэкенд
  }

  // Добавление автомобиля
  async function saveCar() {
    const data = {
      vin: document.getElementById('vin').value,
      brand: document.getElementById('brand').value,
      model: document.getElementById('model').value,
      mileage: document.getElementById('mileage').value,
      tasks: document.getElementById('tasks').value.split('\n')
    };
    // Отправка на бэкенд
  }

  // Назначение исполнителя
  function assignExecutor(carId) {
    document.getElementById('assign-modal').classList.remove('hidden');
    // Логика отправки данных
  }

  // Смена темы
  function applyTheme() {
    document.body.setAttribute(
      'data-theme',
      tg.isDarkMode() ? 'dark' : 'light'
    );
  }
  applyTheme();
  tg.onUpdate(applyTheme);
</script>
</body>
</html>
